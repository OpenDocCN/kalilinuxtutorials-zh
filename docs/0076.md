# 牛脂–窗户用透明 Tor

> 原文：<https://kalilinuxtutorials.com/tallow-tor-anonymity-network/>

牛脂是一个小程序，它通过 Tor 匿名网络重定向来自 Windows 机器的所有出站流量。Tor 无法处理的任何流量(例如 UDP)都会被阻止。它还拦截和处理 DNS 请求，防止潜在的泄漏。

**牛油有多种用途，包括:**

1.  那里的“Tor-ifying”应用程序从来不是为使用 Tor 而设计的
2.  过滤规避——如果您希望绕过本地过滤器，并且不太关心匿名性
3.  聊胜于无——有些 Tor 可能比没有 Tor 要好。

注意，就其本身而言，牛油并不是一个完整的强匿名解决方案。请参见下面的警告。

**也可理解为 [邮件密码嗅探器——通过网络恢复邮件密码的工具](https://kalilinuxtutorials.com/mail-password-sniffer/)**

## **牛油技术**

**它使用以下配置连接到互联网:**

```
+-----------+        +-----------+        +----------+
|    PC     |------->|    TOR    |------->|  SERVER  |
|  a.b.c.d  |<-------|  a.b.c.d  |<-------|  x.y.z.w |
+-----------+        +-----------+        +----------+
```

这里(a.b.c.d)代表本地地址，(x.y.z.w)代表远程服务器。

它使用 [WinDivert](http://reqrypt.org/windivert.html) 拦截所有进出你电脑的流量。牛油处理两种主要的流量类型:DNS 流量和 TCP 流。

DNS 查询被 Tallow 自己拦截和处理。牛脂不是找到一个域的真实 IP 地址，而是生成一个伪随机的“假”域(在 44.0.0.0/24 范围内)并在查询响应中使用这个地址。假 IP 也与域相关联，并被记录在表中以供以后参考。另一种方法是通过 Tor(支持 DNS)查找真实的 IP 地址。然而，由于牛油使用 SOCKS4a，真正的 IP 是不必要的。在本地处理 DNS 请求要快得多。

TCP 连接也会被拦截。牛油“反映”出站 TCP 连接到入站 SOCKS4a 连接到 Tor 程序。如果连接到一个假 IP，它会查找相应的域，并将其用于 SOCKS4a 连接。否则连接被阻塞(默认情况下)或使用通过 Tor 的 SOCKS4 直接连接。用一点魔法就可以把 TCP 连接到 SOCKS4(a)上。

所有其他流量都被完全阻塞。这包括所有非 TCP 或 DNS 的入站(非 Tor)流量和出站流量。此外，它还会阻止 hosts.deny 文件中列出的所有域。这包括 Windows update、Windows phone home 和一些常见的 ad 服务器等域，以帮助防止 Tor 带宽浪费。如果您认为合适，可以编辑和自定义 hosts.deny 文件。

请注意，它不会拦截 Tor 使用的 TCP 端口 9001 和 9030。作为一个副作用，牛脂将不能在任何其他使用这些端口的程序上工作。

## **警告**

目前，牛脂没有尝试匿名化通过 Tor 网络发送的流量内容。这些信息可能会被用来消除您的匿名。除非你知道自己在做什么，否则不应该依赖它来实现强匿名。

[![](img/d861a9096555aeb1980fc054015933d7.png)](https://github.com/basil00/TorWall)